---
title: "Pseudo_Facebook_data"
output: html_document
---
```{r}
#install.packages('ggplot2')
library(ggplot2)
#install.packages('gridExtra')
library(gridExtra)
#install.packages('dplyr')
library(dplyr)
#install.packages('reshape2')
library(reshape2)
```

Read in the psuedo Facebook data.
```{r}
#use sep to indicate file is tab seperated
pf <- read.csv('pseudo_facebook.tsv', sep = '\t')
names(pf)
```

## Friend count
Let's see look in to the friend count and see if there's much of a difference in friend count between male and female users. We would like to omit the rows which have 'NA' as their gender by subseting the data to only include the rows that don't have NA as gender.
```{r Omitting NA Values}
qplot(x = friend_count, data = subset(pf, !is.na(gender)), binwidth = 10) +
  scale_x_continuous(limits = c(0, 1000),
                     breaks = seq(0, 1000, 50)) +
  facet_wrap(~gender)
```
From this plot it looks like male users have a higher proportion of low friend count 
than female useers. Let's look at the statistics of friend count by gender to 
get a clearer idea of the difference in friend count.
```{r Statistics \'by\' Gender}
table(pf$gender)
by(pf$friend_count, pf$gender, summary)
```
Both the median and mean friend count for female users is higher than for males. 
The median friend count will be a more robust statistic in this case as extreme 
outliers may skew the mean friend count. 

Let's look in to some of the factors that might affect friend count.

### (i) Tenure
Friend count will be affected by how long a user has been a member of Facebook so let's plot the tenure for Facebook users.
```{r Tenure Histogram by Year}
qplot(x=tenure/365, data = pf, binwidth=0.25, 
      xlab ='Number of years using Facebook',
      ylab='Number of users in sample',
      color=I('black'), fill=I('#F79420') )
```
The majority of users have been on Facebook for less than 2.5 years. However, 
those that have been on Facebook longer will likely have gained more friends over
time than the newer users. 

## (ii) User Ages
Let's see what age groups use Facebook. 
```{r User Ages}
summary(pf$age) #give the min and max ages help determine scale for x axis
qplot(x=age, data=pf, binwidth=1, xlab = "age", 
      ylab='Number of users in sample',
      color=I('black'), fill=I('#5760AB')) +
      scale_x_continuous(breaks = seq(13,113,5)) #seq(0,113,5) goes from 0 to 113 in units of 5 on x axis
```
The summary shows the minimum age is 13 and the max is 113. This is useful as you 
can't use facebook if you're younger than 13 and we're not confident about the 
data we have for the over 90s are truthful. 

Since the data is quite skewed we'll get the friend count in a log10 scale to get 
a different perspective of friend count. Log scales allow a large range to be 
displayed without small values being compressed down into the bottom of the 
graph. Getting log10 of 0 is undefined so the min - where people have 0 friends 
would yield a result of negative infinity. In order to avoid this we add 1 to the 
friend count
```{r}
summary(pf$friend_count)

summary(log10(pf$friend_count +1))
```
Plot the transformations:
```{r Add a Scaling Layer}
p1 <- ggplot(aes(x=friend_count), data=pf) + geom_histogram()
p2<- p1 + scale_x_log10()
p3<- p1 + scale_x_sqrt()

# arrange plots in grid
grid.arrange(p1, p2, p3, ncol=1)
#Keep in mind this method has the same label for the x axis in all plots but it would be more helpful to know when log10 or sqrt was used in the labels
```





















